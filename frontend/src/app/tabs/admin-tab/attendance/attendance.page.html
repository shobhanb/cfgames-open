<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/admin"></ion-back-button>
    </ion-buttons>
    <ion-title>Attendance</ion-title>
    <app-toolbar-buttons slot="end"></app-toolbar-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Attendance Management</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>
        Track athlete attendance for each event and apply attendance points to
        team scores.
      </p>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Select Event</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        @for (event of eventService.currentYearEvents(); track event.ordinal) {
        <ion-item
          [button]="true"
          [detail]="true"
          (click)="openAttendanceModal(event)"
        >
          <ion-label>
            <h2>{{ event.event }}</h2>
            <p>Edit attendance for this event</p>
          </ion-label>
        </ion-item>
        }
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Apply Attendance Points</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>
        Apply attendance points to all teams based on saved attendance records.
      </p>
      <ion-button
        expand="block"
        color="primary"
        (click)="onClickApplyAttendance()"
      >
        Apply Attendance Scores
      </ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>
