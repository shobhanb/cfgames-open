<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/me"></ion-back-button>
    </ion-buttons>
    <ion-title>My Appreciation</ion-title>
    <app-toolbar-buttons slot="end"></app-toolbar-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Appreciation text</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-text
        >Here you will find comments for votes that you received from your
        fellow athletes for appreciating you</ion-text
      >
    </ion-card-content>
  </ion-card>

  @if (dataLoaded()) { @if (appreciationResults().length === 0) {
  <ion-card>
    <ion-card-header>
      <ion-card-title>No Appreciation comments</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      You haven't received any appreciation comments for {{ currentYear }} yet.
    </ion-card-content>
  </ion-card>
  } @else { @for (result of appreciationResults(); track result.ordinal) {
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        {{ eventService.getEventName(result.ordinal, result.year) }}
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>{{ result.text }}</ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  } } } @else {
  <!-- Loading skeleton -->
  @for (item of [1, 2, 3]; track $index) {
  <ion-card>
    <ion-card-header>
      <ion-skeleton-text
        [animated]="true"
        style="width: 150px; height: 20px"
      ></ion-skeleton-text>
    </ion-card-header>
    <ion-card-content>
      <ion-skeleton-text
        [animated]="true"
        style="width: 100px; height: 16px; margin-bottom: 8px"
      ></ion-skeleton-text>
      <ion-skeleton-text
        [animated]="true"
        style="width: 90%; height: 14px; margin-bottom: 4px"
      ></ion-skeleton-text>
      <ion-skeleton-text
        [animated]="true"
        style="width: 85%; height: 14px"
      ></ion-skeleton-text>
    </ion-card-content>
  </ion-card>
  } }
</ion-content>
